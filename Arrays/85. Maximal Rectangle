class Solution {
    public int maximalRectangle(char[][] matrix) {
        if(matrix == null || matrix.length == 0 || matrix[0].length ==0) return 0;
        int m = matrix.length;
        int n = matrix[0].length;
        int[] h = new int[n+1];
        int a = 0;

        for(int i=0;i<m;i++){
            for(int j=0;j<n;j++){
                if(matrix[i][j] == '1'){
                    h[j] += 1;
                }else{
                    h[j] = 0;
                }
            }
            Stack<Integer>st = new Stack<>();
            st.push(-1);

            for(int j=0;j<=n;j++){
                while(st.peek() !=-1 && h[j]<h[st.peek()]){
                    int hi = h[st.pop()];
                    int w = j - st.peek() - 1;
                    a = Math.max(a,hi*w);
                }
                st.push(j);
            }
        }
        return a;
    }
}
